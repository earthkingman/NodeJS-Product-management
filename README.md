# Product-management
 Microservices and Monolithic services

# 목적
본 프로젝트는 Node.js로 마이크로서비스와 반대 개념인 모놀리식 서비스를 직접 제작함으로써 장단점과 마이크로서비스의 필요성에 대해 알아봅니다.


상품 관리,회원 관리,구매 관리 모놀리식 서비스로 제작합니다.


모놀리식으로 제작된 서비스를 마이크로 서비스로 변형합니다.


마이크로서비스 아키텍쳐를 만들 때 고려한점에 대해 설명합니다.


# 사전학습
## 모놀리식 아키텍처란?
하나의 애플리케이션 안에 모든 컴포넌트를 포함하는 구조입니다.

구조가 단순해 개발과 배포가 간편합니다.
## 모놀리식 아키텍처의 한계
### 1. 분산 처리가 비효율적입니다.<br>
모놀리식 아키텍처는 모든 기능을 프로세스 하나 또는 코드 베이스로 개발하기 때문에 기능별로 분산 처리를 할 수 없습니다. 항상 전체를 같이 분산해야 합니다.
### 2. 코드를 관리하기 어렵습니다.<br>
코드 구조가 하나이기에 새로운 코드를 추가하려면 전체 코드를 이해해야 하고 코드를 추가할수록 구조가 복잡해집니다.
### 3. 새로운 기술을 적용하기 어렵습니다.<br>
특정 기능에 새로운 기술을 적용하고 싶어도 기능별로 코드가 독립적이지 않아 적용하기 쉽지 않습니다.

## 마이크로서비스 아키텍처란?
커다란 모놀리식 아키텍쳐를 단독으로 실행 가능한 다수의 모듈로 분해한 아키텍쳐를 마이크로서비스 아키텍쳐라고 합니다.<br>이때 실행 가능한 하나의 모듈을 마이크로 서비스라고 합니다.

# 모놀리식 서비스 만들기
## 요구 사항 정의
- 상품 관리, 회원 관리, 구매 관리 기능 API제공 합니다.
- REST API형식
- 상품 관리(상품 등록, 상품 조회, 상품 삭제)
- 회원 관리(회원 등록, 회원 인증, 회원 탈퇴)
- 구매 관리(구매, 구매 내역 조회)
- 상품 정보는 '상품명', '상품 카테고리', '가격', '상품 설명'으로 구성됩니다.
- 회원 정보는 '사용자명',과 패스워드로 구성됩니다.
- 구매 정보는 '사용자 정보', 상품정보', '구매 일자'로 구성됩니다.
- 상품 조회는 등록된 모든 상품을 조회하는 기능입니다.
## REST API 설계
### 상품 관리 REST API
|기능|메서드|URI|
|------|------|------|
|상품 등록|POST|/goods|
|상품 조회|GET|/goods|
|상품 삭제|DELETE|/goods|
- 상품 등록 입력 파라미터

|파라미터명|의미|타입|
|------|------|------|
|name|상품명|String|
|category|상품 카테고리|String|
|price|가격|Number|
|description|상품 설명|String|
- 상품 등록 결과

|파라미터명|의미|타입|
|------|------|------|
|errorcode|에러 코드|Number|
|errormessage|에러 메세지|Number|
- 상품 조회 결과      
        
|파라미터명|의미|타입|
|------|------|------|
|errorcode|에러 코드|Number|
|errormessage|에러 메세지|Number|
|results|상품 목록|Array|
- 상품 목록 상세

|파라미터명|의미|타입|
|------|------|------|
|id|고유 번호|Number|
|name|상품명|String|
|category|상품 카테고리|String|
|price|가격|Number|
|description|상품 설명|String|
- 상품 삭제 입력 파라미터

|파라미터명|의미|타입|
|------|------|------|
|id|고유 번호|Number|
- 상품  결과

|파라미터명|의미|타입|
|------|------|------|
|errorcode|에러 코드|Number|
|errormessage|에러 메세지|Number|

### 회원 관리 REST API
|기능|메서드|URI|
|------|------|------|
|회원 등록|POST|/members|
|회원 인증|GET|/members|
|상품 탈퇴|DELETE|/members|
- 회원 등록과 회원 인증 입력 파라미터

|파라미터명|의미|타입|
|------|------|------|
|username|사용자명|String|
|password|패스워드|String|
- 회원 등록 결과

|파라미터명|의미|타입|
|------|------|------|
|errorcode|에러 코드|Number|
|errormessage|에러 메세지|String|

- 회원 등록 결과

|파라미터명|의미|타입|
|------|------|------|
|errorcode|에러 코드|Number|
|errormessage|에러 메세지|String|

- 회원 인증 결과

|파라미터명|의미|타입|
|------|------|------|
|errorcode|에러 코드|Number|
|errormessage|에러 메세지|String|
|userid|사용자 고유 번호|Number|

- 회원 탈퇴 입력 파라미터

|파라미터명|의미|타입|
|------|------|------|
|username|사용자명|String|

- 회원 탈퇴 결과

|파라미터명|의미|타입|
|------|------|------|
|errorcode|에러 코드|Number|
|errormessage|에러 메세지|string|


### 구매 관리 REST API
|기능|메서드|URI|
|------|------|------|
|구매|POST|/purchases|
|구매 내역 조회|GET|/purchases|
- 구매 입력 파라미터

|파라미터명|의미|타입|
|------|------|------|
|userid|사용자 고유 번호|Number|
|goodsid|상품 고유 번호|Number|
- 구매 결과

|파라미터명|의미|타입|
|------|------|------|
|errorcode|에러 코드|Number|
|errormessage|에러 메세지|String|

- 구매 내역 조회 파라미터

|파라미터명|의미|타입|
|------|------|------|
|userid|사용자 고유 번호|Number|

- 구매 내역 조회 결과

|파라미터명|의미|타입|
|------|------|------|
|errorcode|에러 코드|Number|
|errormessage|에러 메세지|String|
|results|구매 내역 목록|Array|

- 구매 내역 목록 상세

|파라미터명|의미|타입|
|------|------|------|
|id|고매 고유 번호|Number|
|goodsid|상품 고유 번호|String|
|data|구매 일자|string|

## 데이터 베이스 설계
일반적으로 데이터를 저장하는 저장소로 관계형 데이터베이스와 비관계형데이터베이스가 있습니다.
### 관계형 데이터베이스
관계형 데이터베이스는 각 테이블마다 명확하게 정의된 구조를 가지고 있고,이 구조를 따르지 않는 레코드들은 추가할 수 없습니다. 그리고 SQL 기반의 데이터 베이스의 또 다른 중요한 부분은 관계입니다.
데이터들을 여러개의 테이블에 나누어서, 데이터들의 중복을 피할 수 있습니다. 하나의 테이블에서 중복없이 하나의 데이터만을 관리하기 때문에, 다른 테이블에서 부정확한 데이터를 다룰 위험이 없습니다.
### 비관계형 데이터베이스
NoSQL에서는 다른 구조의 데이터를 같은 컬렉션(= SQL에서의 테이블)에 추가할 수 있습니다.
일반적으로 관련 데이터를 동일한 컬렉션에 넣습니다.이런 방식은 데이터가 중복되기 때문에 불안정한 측면이 있습니다.
그럼에도 불구하고, 이러한 방식의 큰 장점은 복잡한 조인을 사용할 필요가 없다는 것입니다.

### 데이터베이스 선정
어느 데이터베이스가 좋고 나쁜지는 따질 수 없지만 본 프로젝트는 정확한 데이터 구조를 알 수 있고 데이터 구조가 변경되지 않습니다.
그래서 관계형 데이터베이스 Mysql을 사용하겠습니다.

## 상품 관리 테이블 설계
|키|속성|이름|Null 허용|유형|기본값|
|--|---|---|---|---|---|
|기본키|상품 ID|id|Not null|INT|AUTO_INCREMENT|
||상품명|name|Not null|VARCHAR(128)|
||카테고리|catagory|Not null|VARCHAR(128)|
||가격|price|Not null|INT|
||상품 설명|description|Not null|TEXT|

## 회원 관리 테이블 설계
|키|속성|이름|Null 허용|유형|기본값|
|--|---|---|---|---|---|
|기본키|사용자 ID|id|Not null|INT|AUTO_INCREMENT|
|유일키|사용자명|username|Not null|VARCHAR(128)|
||패스워드|password|Not null|VARCHAR(256)|

## 구매 관리 테이블 설계
|키|속성|이름|Null 허용|유형|기본값|
|--|---|---|---|---|---|
|기본키|구매 관리 ID|id|Not null|INT|AUTO_INCREMENT|
||사용자 ID|userid|Not null|INT|
||상품 ID|goodsid|Not null|INT|
||구매 일자|date|Not null|DATETIME|CURRENT_TIMESTAMP|


# 구현
## 파일 구조
![image](https://user-images.githubusercontent.com/48669085/115416529-d32df100-a232-11eb-9b97-15f054f745e8.png)


# 참고문서
Node.js마이크로서비스 코딩공작소 길벗 출판사 -정대천-


https://nodejs.dev/learn
